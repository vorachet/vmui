"use strict";(self.webpackChunkvmui=self.webpackChunkvmui||[]).push([[8],{4626:function(e,n,r){r.d(n,{D:function(){return i},u:function(){return o}});var t=r(1413),i={buildTrayModel:function(e,n){if(r=n,!Array.isArray(r)||0===r.length||r.map((function(e){return Array.isArray(e)&&e.length>0})).includes(!1)||0!==r.map((function(e){return e.map((function(e){return typeof e}))})).flat().filter((function(e){return"number"!==e})).length||r.map((function(e){return e.map((function(e){return e%1===0}))})).flat().includes(!1))return{model:e,input:n,error:!0,rows:0,rowsContent:[],selections:0,capacityUnits:0};var r;return{model:e,input:n,error:!1,rows:n.length,rowsContent:n.map((function(e,n){return{row:n+1,socketsCount:e.length,sockets:e.map((function(e,r){return{socket:n+1+"-"+(r+1),limit:e}}))}})),selections:n.map((function(e){return e.length})).reduce((function(e,n){return e+n}),0),capacityUnits:n.flat().reduce((function(e,n){return e+n}),0)}},randomInt:function(e,n){return e+Math.floor(Math.random()*(n-e+1))},createDispenserDB:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return{};var r=e.rowsContent.map((function(e){return e.sockets.map((function(e){return(0,t.Z)((0,t.Z)({},e),n?l(e.limit):i.createEmptyProduct())}))})).flat(),s={};return r.map((function(e){return s[e.socket]=e})),s},formatNumber:o};var s=new Intl.NumberFormat({minimumFractionDigits:0,maximumFractionDigits:0});function o(e){return s.format(e)}function l(e){var n=a[i.randomInt(0,3)];return n.qty=e,n}var a=[{name:"Snack",price:i.randomInt(12,50),image:"/vmui/images/snack.png"},{name:"Redbull",price:i.randomInt(12,50),image:"/vmui/images/redbull.png"},{name:"Cola",price:i.randomInt(12,50),image:"/vmui/images/cola.png"},{name:"Gum",price:i.randomInt(12,50),image:"/vmui/images/gum.png"}]},2869:function(e,n,r){r.d(n,{Z:function(){return o}});var t=r(8353),i=r(8206),s=r(6417);function o(e){var n=e.title;return(0,s.jsxs)(t.x,{size:"sm",weight:900,color:"dimmed",children:[n,(0,s.jsx)(i.i,{})]})}},3944:function(e,n,r){r.d(n,{Y:function(){return L}});var t=r(2816),i=r(1834),s=r(5554),o=r(9187),l=r(1565),a=r(3455),c=r(4626),d=r(6417);var u=r(4851),h=[{value:35,label:"sm"},{value:65,label:"md"},{value:80,label:"lg"}];var m=r(5633),x=r(4403),f=r(9439),j=r(7163),v=r(8489),p=r(8353),g=r(5912),y=r(8206),w=r(7491),Z=r(6236),C=r(5750),k=r(1093),D=r(2214),I=r(3373),z=r(8167);function b(){var e=(0,s.v9)(l.g9),n=(0,s.v9)(o.R),r=(0,s.v9)(o.zt),t=(0,s.I0)(),a=(0,I.Z)(z),c=(0,f.Z)(a,1)[0];function u(e,n){var r=e>3,t=r?e-3:0;return(0,d.jsxs)(d.Fragment,{children:[Array(r?3:e).fill().map((function(e,r){return(0,d.jsx)(j.E,{src:n,style:{width:40}},"disImg"+r)})),t>0&&(0,d.jsx)(v.q,{radius:"50%",color:"gray.6",variant:"outline",children:(0,d.jsxs)(p.x,{weight:300,children:["+",t]})})]})}return(0,d.jsx)(C.X,{children:(0,d.jsx)(k.x,{style:{height:"100%",width:"100%"},children:e?(0,d.jsx)(w.Z,{children:Object.keys(e).map((function(s){return function(s){var o=0===e[s].qty,a=e[s].qty<=r,h=e[s].qty<=0,m=e[s].qty>=e[s].limit;return(0,d.jsxs)(g.Z,{shadow:"xs",withBorder:!0,p:10,style:{minWidth:250,minHeight:180,background:a?o?"orange":"yellow":""},children:[(0,d.jsxs)(p.x,{size:"xs",color:a?"red":"dimmed",children:[a?(0,d.jsx)(i.Ldj,{color:"red",stroke:2,size:20}):"","Socket ",s,(0,d.jsx)(y.i,{})]}),(0,d.jsxs)(w.Z,{position:"apart",children:[(0,d.jsxs)(p.x,{size:"xs",color:"dimmed",children:[e[s].name," (",n,e[s].price,"/unit)"]}),(0,d.jsxs)(p.x,{size:"xs",color:"dimmed",children:["Qty: ",e[s].qty,"/",e[s].limit]})]}),(0,d.jsxs)(w.Z,{noWrap:!0,p:10,style:{minHeight:100},children:[0===e[s].qty&&(0,d.jsx)(x.D,{order:5,align:"center",children:"No Items"}),u(e[s].qty,e[s].image)]}),(0,d.jsxs)(w.Z,{position:"apart",children:[!h&&(0,d.jsx)(Z.A,{size:"xs",variant:"filled",onClick:function(){c(),t((0,l.V)(s))},children:(0,d.jsx)(i.UrD,{})}),!m&&(0,d.jsx)(Z.A,{size:"xs",variant:"filled",onClick:function(){c(),t((0,l.fM)(s))},children:(0,d.jsx)(i.SC9,{})})]})]},"socket"+s)}(s)}))}):(0,d.jsx)(D.M,{children:(0,d.jsx)(p.x,{size:"sm",color:"red",children:"No Dispenser DB"})})})})}var M=[{value:0,label:"0"},{value:3,label:"3"},{value:5,label:"5"},{value:10,label:"10"}];var B=r(5588),S=r(4158),E=r(7313),A=r(4047);var T=r(9606);var O=r(4677),q=r(4918);var F=r(2715),P=r(3172),R=r(9592),V=r(764),N=r(9602),Q=r.p+"static/media/pickup.49adb4e02e896439cd63.wav",U=r(2869);var W=r.p+"static/media/coin.05482570c4509dd1e54e.wav",G=r.p+"static/media/coinDrop.e35a6b4dac3d415d7770.wav";var H=r.p+"static/media/thankyou.92e05360bef70fb66a04.mp3";var X=r(3080);var L={Title:U.Z,ImageSizeAdjustmentSlider:function(){var e=(0,s.I0)(),n=(0,s.v9)(o.Us);return(0,d.jsx)(u.i,{label:"Img size ".concat(n," "),labelAlwaysOn:!0,style:{width:"100%"},defaultValue:n,min:h[0].value,max:h[h.length-1].value,onChange:function(n){e((0,o.sI)(n))}})},OutOfStockWarningAdjustmentSlider:function(){var e=(0,s.I0)(),n=(0,s.v9)(o.zt);return(0,d.jsx)(u.i,{label:"Stock warn ".concat(n," "),labelAlwaysOn:!0,style:{width:"100%"},defaultValue:n,min:M[0].value,max:M[M.length-1].value,onChange:function(n){e((0,o.Hd)(n))}})},InventoryModalButton:function(){var e=(0,s.I0)(),n=(0,s.v9)(l.g9),r=(0,s.v9)(o.Ko),c=(0,d.jsx)(m.u,{fullScreen:!0,centered:!0,title:(0,d.jsx)(x.D,{children:"Inventory"}),opened:r,onClose:function(){return e((0,o.gt)(!1))},children:(0,d.jsx)(b,{})});return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(t.z,{leftIcon:(0,d.jsx)(i.fqO,{}),onClick:function(){if(!n)return(0,a.c0)({title:"Machine Error",message:"No Dispenser DB",color:"red"});e((0,o.gt)(!0))},children:"Inventory"}),c]})},PlaygroundEditorModalButton:function(){var e=(0,s.I0)(),n=(0,E.useState)(),r=(0,f.Z)(n,2),l=r[0],u=r[1],h=(0,E.useState)(),m=(0,f.Z)(h,2),j=m[0],v=m[1],p=(0,E.useState)(),g=(0,f.Z)(p,2),y=g[0],Z=g[1],C=(0,d.jsx)(B.d,{opened:j,onClose:function(){return v(!1)},title:(0,d.jsx)(x.D,{order:2,children:"Playground Editor"}),padding:"xl",size:"xl",position:"left",overlayOpacity:.2,children:(0,d.jsxs)(w.Z,{children:[(0,d.jsx)(S.g,{label:"Manually write your Tray Model",placeholder:"[[1], [1,1], [1,1,1]]",minRows:8,style:{width:"100%"},onChange:function(e){u(e.target.value)}}),(0,d.jsx)(t.z,{onClick:function(){!function(){try{var n=c.D.buildTrayModel("playground",JSON.parse(l));n.error?(0,a.c0)({title:"Machine Error",message:"Invalid Tray Model",color:"red"}):(e((0,o.Q4)(n)),(0,a.c0)({title:"Playground Tray Model",message:"Valid Tray Model"}))}catch(r){return(0,a.c0)({title:"Machine Error",message:"Invalid Tray JSON",color:"red"}),!1}}()},children:"Validate & Install"}),(0,d.jsx)(t.z,{onClick:function(){!function(){var n=[Array(c.D.randomInt(1,8)).fill().map((function(e,n){return c.D.randomInt(5,24)})),Array(c.D.randomInt(1,8)).fill().map((function(e,n){return c.D.randomInt(5,24)})),Array(c.D.randomInt(1,8)).fill().map((function(e,n){return c.D.randomInt(5,24)})),Array(c.D.randomInt(1,8)).fill().map((function(e,n){return c.D.randomInt(5,24)}))];Z((0,A.Z)(n));var r=c.D.buildTrayModel("playground",n);e((0,o.Q4)(r))}()},children:"Randomly Generate Tray Model"}),y&&(0,d.jsx)(S.g,{readOnly:!0,minRows:8,value:y,style:{width:"100%"}})]})});return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(t.z,{leftIcon:(0,d.jsx)(i.iCC,{}),onClick:function(){v(!0)},children:"Playground"}),C]})},GenerateDispenserDBButton:function(){var e=(0,s.I0)(),n=(0,s.v9)(o.dv);function r(){!function(){var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!n)return(0,a.c0)({title:"Machine Error",message:"Tray model must be installed",color:"red"});var t=c.D.createDispenserDB(n,r);console.log("dbkv",t),e((0,l.W)(t))}(!0)}return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(t.z,{leftIcon:(0,d.jsx)(i.SC9,{}),onClick:function(){r()},children:"Generate Dispenser DB"})})},ViewDispenserButton:function(){var e=(0,s.I0)(),n=(0,s.v9)(o.E),r=(0,s.v9)(l.g9),c=(0,d.jsx)(m.u,{size:"lg",centered:!0,withCloseButton:!1,title:(0,d.jsx)(x.D,{children:"Dispenser DB"}),opened:r&&n,onClose:function(){return e((0,o.B6)(!1))},children:r&&(0,d.jsx)(w.Z,{children:(0,d.jsx)(S.g,{minRows:20,style:{width:"100%"},readOnly:!0,value:(0,A.Z)(r)})})});return(0,d.jsxs)(d.Fragment,{children:[r?(0,d.jsx)(t.z,{leftIcon:(0,d.jsx)(i.OQ8,{}),onClick:function(){r?e((0,o.B6)(!0)):(0,a.c0)({title:"Vending Machine",message:"Dispenser DB empty",color:"red"})},children:"Dispenser DB"}):(0,d.jsx)(p.x,{size:"xs",color:"dimmed",children:"No Dispenser DB"}),c]})},ViewTrayModelButton:function(){var e=(0,s.I0)(),n=(0,s.v9)(o.El),r=(0,s.v9)(o.dv),l=(0,d.jsx)(m.u,{size:"lg",centered:!0,withCloseButton:!1,title:(0,d.jsx)(x.D,{children:"Tray Model"}),opened:n,onClose:function(){return e((0,o.lQ)(!1))},children:r&&(0,d.jsx)(w.Z,{children:(0,d.jsx)(S.g,{minRows:20,style:{width:"100%"},readOnly:!0,value:(0,A.Z)(r)})})});return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(t.z,{leftIcon:(0,d.jsx)(i.OQ8,{}),onClick:function(){e((0,o.lQ)(!0))},children:"Tray Model"}),l]})},SetBrand:function(){var e=(0,s.I0)(),n=(0,s.v9)(o.Wi);return(0,d.jsx)(T.o,{label:"Brand",defaultValue:n,onChange:function(n){e((0,o.HB)(n.target.value))}})},SetCurrency:function(){var e=(0,s.I0)(),n=(0,s.v9)(o.R);return(0,d.jsx)(T.o,{label:"Currency",defaultValue:n,onChange:function(n){e((0,o.NW)(n.target.value))}})},SetPredefinedCoins:function(){var e=(0,s.I0)(),n=(0,s.v9)(o.R),r=(0,s.v9)(q.hE);return(0,d.jsx)(O.NU,{label:"Accepted Coins",data:r.map((function(e){return{value:""+e,label:n+(0,c.u)(e)}})),defaultValue:r.map((function(e){return""+e})),creatable:!0,searchable:!0,getCreateLabel:function(e){return"+ Create ".concat(e)},onChange:function(n){e((0,q.LV)(n))},onCreate:function(r){var t=parseInt(r);return t>5e3?(0,a.c0)({title:"Machine Error",message:"".concat(r," must be less than ").concat((0,c.u)(5e3)),color:"red"}):(e((0,q.$7)(t)),{value:""+t,label:n+t})}})},CashAcceptor:function(e){var n=e.showTitle,r=void 0===n||n,i=(0,I.Z)(z),l=(0,f.Z)(i,1)[0],a=(0,I.Z)(W),u=(0,f.Z)(a,1)[0],h=(0,I.Z)(G),m=(0,f.Z)(h,1)[0],j=(0,s.v9)(q.dF),y=(0,s.v9)(q.BP),Z=(0,s.v9)(q.GN),C=(0,s.v9)(q.hE),k=(0,s.v9)(o.R),b=(0,s.I0)();return(0,E.useEffect)((function(){y>0&&m()}),[y,m]),(0,d.jsxs)(g.Z,{p:20,children:[r&&(0,d.jsx)(U.Z,{title:"Cash Acceptor"}),(0,d.jsx)(w.Z,{position:"center",my:20,children:(0,d.jsxs)(x.D,{order:4,children:["Total: ",k,(0,c.u)(j)]})}),C.map((function(e){return(0,d.jsxs)(w.Z,{my:10,position:"apart",children:[(0,d.jsx)(v.q.Group,{spacing:"sm",children:(0,d.jsx)(v.q,{radius:"50%",size:"lg",style:{cursor:"pointer"},onClick:function(){return n=e,b((0,P.vP)({time:Date.now(),name:"addCoin"+n,data:{amount:n,currency:k}})),b((0,q.pG)(n)),void u();var n},children:(0,d.jsxs)(p.x,{size:"sm",children:["+",k,e]})})}),(0,d.jsx)(p.x,{weight:500,children:Z[e]})]},"coin"+e)})),(0,d.jsx)(D.M,{children:(0,d.jsx)(t.z,{fullWidth:!0,mt:20,variant:"filled",style:{height:60},onClick:function(){l(),b((0,q.pC)())},children:"Clear"})})]})},Assortment:function(e){var n=e.trayModel,r=e.dispenserDB,i=e.trayOnly,a=e.showSocket,u=void 0===a||a,h=e.showTitle,Z=void 0===h||h,k=(0,I.Z)(z),b=(0,f.Z)(k,1)[0],M=(0,I.Z)(Q),B=(0,f.Z)(M,1)[0],S=(0,s.I0)(),A=(0,s.v9)(o.dv),T=(0,s.v9)(o.fU),O=(0,s.v9)(o.R),W=(0,s.v9)(o.Us),G=(0,s.v9)(l.g9),H=(0,s.v9)(q.dF),X=(0,E.useState)(),L=(0,f.Z)(X,2),_=L[0],J=L[1],K=(0,E.useState)(),Y=(0,f.Z)(K,2),$=Y[0],ee=Y[1],ne=(0,E.useState)({}),re=(0,f.Z)(ne,2),te=re[0],ie=re[1];function se(e){if(!e)return!1;var n=te[e.socket];return!!n&&(H>=n.price&&n.qty>0)}(0,E.useEffect)((function(){n&&S((0,o.Q4)(n))}),[n,S]),(0,E.useEffect)((function(){r&&S((0,l.W)(r))}),[r,S]),(0,E.useEffect)((function(){G&&(Object.keys(G).length>0&&ie(G))}),[G]);var oe=(0,d.jsx)(C.X,{mt:10,children:A?(0,d.jsx)(d.Fragment,{children:A.rowsContent.map((function(e){return(0,d.jsx)(g.Z,{children:(0,d.jsx)(R.r,{grow:!0,children:e.sockets.map((function(e){return(0,d.jsx)(R.r.Col,{span:"content",children:le(e)},"socket"+e.socket)}))})},"trayRow"+e.row)}))}):(0,d.jsx)(p.x,{size:"sm",color:"red",children:"No Machine Model"})});function le(e){var n=te[e.socket],r=!n||0===n.qty;return(0,d.jsx)(w.Z,{position:"center",grow:!0,children:(0,d.jsxs)(g.Z,{withBorder:!i&&se(e),style:{minHeight:70,background:se(e)?"green":""},children:[!i&&n&&(0,d.jsx)(g.Z.Section,{p:10,children:(0,d.jsx)(D.M,{children:(0,d.jsxs)(p.x,{weight:900,color:se(e)?"white":"",children:[n.name,r&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(y.i,{}),(0,d.jsx)(p.x,{size:"xs",color:"red",weight:600,children:"Out of stock"})]})]})})}),(0,d.jsx)(g.Z.Section,{p:5,children:(0,d.jsx)(D.M,{children:n&&!i?(0,d.jsx)(j.E,{src:n.image,style:{opacity:r?.1:1,minHeight:W},width:W,color:"dark"}):(0,d.jsx)(v.q,{size:W,mt:20,radius:"50%",color:"dark",children:e.limit})})}),n&&!i&&(0,d.jsx)(g.Z.Section,{p:10,children:(0,d.jsx)(D.M,{children:(0,d.jsxs)(V.C,{onClick:function(){se(e)&&(!function(e){b(),ee(G[e.socket])}(e),J(!0))},style:{cursor:se(e)?"pointer":""},size:se(e)?"md":"sm",variant:se(e)?"filled":"outline",children:[se(e)?"Buy":""," ",O,(0,c.u)(n.price)]})})}),u&&(0,d.jsx)(g.Z.Section,{p:10,children:(0,d.jsx)(D.M,{children:(0,d.jsxs)(p.x,{size:"xs",children:[(0,d.jsx)(y.i,{}),e.socket]})})})]})})}var ae=(0,d.jsx)(m.u,{size:"lg",centered:!0,withCloseButton:!1,opened:_,onClose:function(){return J(!1)},children:$&&(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(w.Z,{position:"apart",grow:!0,children:[(0,d.jsx)(j.E,{src:$.image,width:200}),(0,d.jsxs)(N.K,{children:[(0,d.jsxs)(p.x,{size:"xl",transform:"uppercase",weight:700,color:"dimmed",children:[$.name," ",(0,d.jsx)(y.i,{})," ",O," ",$.price]}),(0,d.jsx)(t.z,{variant:"filled",color:"green",style:{height:40},onClick:function(){B(),S((0,l.V)($.socket)),S((0,F.AZ)($)),S((0,q.BF)($.price)),S((0,P.vP)({time:Date.now(),name:"buy",data:$})),J(!1)},children:"Buy"})]})]})})});return A?(0,d.jsxs)(g.Z,{p:20,children:[Z&&(0,d.jsx)(U.Z,{title:"Assortment"}),!i&&(0,d.jsxs)(w.Z,{position:"apart",children:[(0,d.jsxs)(w.Z,{children:[(0,d.jsxs)(p.x,{size:"sm",color:"dimmed",children:[A.model," "]}),(0,d.jsx)(y.i,{orientation:"vertical",size:"xs"}),(0,d.jsxs)(p.x,{size:"sm",color:"dimmed",children:["Capacity Units = ",A.capacityUnits]}),(0,d.jsxs)(p.x,{size:"sm",color:"dimmed",children:["Selections = ",A.selections]}),(0,d.jsxs)(p.x,{size:"sm",color:"dimmed",children:["Trays = ",A.rows]})]}),(0,d.jsx)(w.Z,{children:T&&(0,d.jsx)(V.C,{children:"Owner Mode"})})]}),oe,ae]}):(0,d.jsx)(x.D,{order:4,align:"center",color:"red",children:"No Tray Model"})},Pickup:function(e){var n=e.showTitle,r=void 0===n||n,i=(0,I.Z)(Q),l=(0,f.Z)(i,1)[0],a=(0,I.Z)(H),u=(0,f.Z)(a,1)[0],h=(0,s.v9)(o.R),m=(0,s.v9)(q.BP),v=(0,s.v9)(F.QE),p=(0,s.I0)();return(0,d.jsxs)(g.Z,{p:20,children:[r&&(0,d.jsx)(U.Z,{title:"Pickup"}),(0,d.jsxs)(w.Z,{position:"center",my:20,children:[(0,d.jsxs)(x.D,{order:4,children:["Change: ",h,(0,c.u)(m)]}),(0,d.jsx)(C.X,{withBorder:!0,my:10,py:40,style:{minHeight:200,width:"100%"},children:v&&(0,d.jsx)(D.M,{children:(0,d.jsx)(j.E,{alt:"",src:v.image,style:{width:120,height:120}})})})]}),v&&(0,d.jsx)(t.z,{variant:"filled",style:{height:60},onClick:function(){l(),u(),p((0,F.zl)()),p((0,q.pC)()),p((0,P.vP)({time:Date.now(),name:"pickup",data:{change:m,name:v.name,price:v.price,qty:v.qty}}))},fullWidth:!0,children:"Pickup"})]})},RefilInventory:b,EventStreamView:function(){var e=(0,s.v9)(P.bQ),n=(0,s.I0)();return(0,d.jsxs)(C.X,{withBorder:!0,p:20,children:[(0,d.jsxs)(w.Z,{position:"apart",children:[(0,d.jsx)(U.Z,{title:"Event Stream"}),(0,d.jsx)(t.z,{size:"xs",onClick:function(){n((0,P.cF)())},children:"Purge"})]}),(0,d.jsx)(k.x,{mt:20,style:{height:"100%"},children:(0,d.jsx)(X.a,{size:"xs",type:"ordered",children:e.map((function(e){return n=e,(0,d.jsxs)(X.a.Item,{children:[n.time,", ",n.name,", ",(0,A.Z)(n.data)]},"t_"+n.time+"_n_"+n.name);var n}))})})]})}}}}]);